<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='node_modules-authorify_client-mixin-WithPayload'>/**
</span> * A mixin class with useful properties.
 *
 * @class node_modules.authorify_client.mixin.WithPayload
 * @inheritable
 *
 * @author Marcello Gesmundo
 *
 * # License
 *
 * Copyright (c) 2012-2014 Yoovant by Marcello Gesmundo. All rights reserved.
 *
 * This program is released under a GNU Affero General Public License version 3 or above, which in summary means:
 *
 * - You __can use__ this program for __no cost__.
 * - You __can use__ this program for __both personal and commercial reasons__.
 * - You __do not have to share your own program's code__ which uses this program.
 * - You __have to share modifications__ (e.g bug-fixes) you've made to this program.
 *
 * For more convoluted language, see the LICENSE file.
 *
 */
module.exports = function(app) {
  'use strict';

  var Class  = app.jsface.Class,
      errors = app.errors;

  var CError = errors.InternalError;

  return Class({
    $statics: {
<span id='node_modules-authorify_client-mixin-WithPayload-static-property-MODES'>      /**
</span>       * Array of enabled modes
       * @property {Array}
       * @static
       */
      MODES: ['handshake', 'auth-init', 'auth', 'auth-plain'],
<span id='node_modules-authorify_client-mixin-WithPayload-static-method-isModeAllowed'>      /**
</span>       * Verify if a mode is allowed
       * @method
       * @param {String} mode The mode to verify
       * @return {Boolean} True if the mode is allowed
       * @static
       */
      isModeAllowed: function(mode) {
        if (this.MODES.indexOf(mode) === -1) {
          throw new CError('not allowed payload mode').log();
        }
        return true;
      }
    },
<span id='node_modules-authorify_client-mixin-WithPayload-method-setMode'>    /**
</span>     * Set the mode
     * @param {String} mode The mode.
     */
    setMode: function(mode) {
      this.isModeAllowed.call(this, mode);
      this._mode = mode;
    },
<span id='node_modules-authorify_client-mixin-WithPayload-method-getMode'>    /**
</span>     * Get the mode
     * @return {String} The current mode
     */
    getMode: function() {
      return this._mode;
    },
<span id='node_modules-authorify_client-mixin-WithPayload-method-setSid'>    /**
</span>     * Set the session identifier
     * @param {String} sid The session identifier
     */
    setSid: function(sessionId) {
      if (sessionId) {
        if (sessionId.length &lt; 24) {
          throw new CError('sid length undersized').log();
        }
        if (sessionId.length &gt; 128) {
          throw new CError('sid length exceeded').log();
        }
        this._sid = sessionId;
      }
    },
<span id='node_modules-authorify_client-mixin-WithPayload-method-getSid'>    /**
</span>     * Get the session identifier
     * @return {String} The current session identifier
     */
    getSid: function() {
      return this._sid;
    }
  });
};
</pre>
</body>
</html>
